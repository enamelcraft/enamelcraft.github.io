<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <title>Staff Dashboard - Enamel Craft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="img/logo.png" rel="icon">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <style>
        body { font-family: 'Open Sans', sans-serif; background: #f5f7fa; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 0; padding: 1rem; }
        .dashboard-content { text-align: center; max-width: 480px; }
        .dashboard-content h1 { color: #008080; font-size: 1.75rem; font-weight: 700; margin-bottom: 1.5rem; }
        .dashboard-links { display: flex; flex-direction: column; gap: 1rem; }
        .dashboard-links a { display: block; padding: 1rem 1.5rem; background: #008080; color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600; transition: background 0.2s; }
        .dashboard-links a:hover { background: #006666; color: #fff; }
        .ec-gate-overlay { position: fixed; inset: 0; z-index: 99999; background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; }
        .ec-gate-box { background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); min-width: 280px; }
        .ec-gate-title { margin: 0 0 1rem; font-size: 1.1rem; color: #333; text-align: center; }
        .ec-gate-form { display: flex; flex-direction: column; gap: 0.75rem; }
        .ec-gate-input { padding: 0.5rem 0.75rem; border: 1px solid #ccc; border-radius: 4px; font-size: 1rem; }
        .ec-gate-btn { padding: 0.5rem 1rem; background: #008080; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 1rem; }
        .ec-gate-btn:hover { background: #006666; }
        .ec-gate-error { margin: 0.5rem 0 0; color: #dc3545; font-size: 0.9rem; text-align: center; }
        .ec-gate-overlay.ec-gate-unlocked { display: none !important; }
    </style>
</head>

<body>
<!-- Password gate -->
<div id="ec-gate-overlay" class="ec-gate-overlay" aria-live="polite">
    <div class="ec-gate-box">
        <p class="ec-gate-title">Staff access</p>
        <form id="ec-gate-form" class="ec-gate-form">
            <label for="ec-gate-password" class="visually-hidden">Password</label>
            <input type="password" id="ec-gate-password" class="ec-gate-input" placeholder="Enter password" autocomplete="current-password" autofocus>
            <button type="submit" class="ec-gate-btn">Enter</button>
        </form>
        <p id="ec-gate-error" class="ec-gate-error" role="alert" hidden>Incorrect password.</p>
    </div>
</div>

<!-- Dashboard (visible after password) -->
<div id="ec-dashboard" class="dashboard-content" style="display: none;">
    <h1>Staff Dashboard</h1>
    <div class="dashboard-links">
        <a href="inv.html">Generate Invoice</a>
        <a href="prescription.html">Generate Prescription</a>
    </div>
</div>

<script>
(function() {
    var STORAGE_KEY = 'ecToolsGate';
    var EXPECTED_HASH = 'ba3535209cb0d23d06f7fabf438cef610f492b905d27767be7fd06e36f6325d5'; // default: EnamelCraft24. To change: in browser console run crypto.subtle.digest('SHA-256',new TextEncoder().encode('YourPassword')).then(b=>console.log(Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,'0')).join(''))) and replace this string with the output.
    var overlay = document.getElementById('ec-gate-overlay');
    var dashboard = document.getElementById('ec-dashboard');
    var form = document.getElementById('ec-gate-form');
    var input = document.getElementById('ec-gate-password');
    var errEl = document.getElementById('ec-gate-error');
    function unlock() {
        sessionStorage.setItem(STORAGE_KEY, '1');
        overlay.classList.add('ec-gate-unlocked');
        dashboard.style.display = 'block';
    }
    if (sessionStorage.getItem(STORAGE_KEY) === '1') {
        overlay.classList.add('ec-gate-unlocked');
        dashboard.style.display = 'block';
        return;
    }
    function hex(buf) { return Array.from(new Uint8Array(buf)).map(function(x){ return ('0'+x.toString(16)).slice(-2); }).join(''); }
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        errEl.hidden = true;
        var pw = (input.value || '').trim();
        if (!pw) return;
        crypto.subtle.digest('SHA-256', new TextEncoder().encode(pw)).then(function(buf) {
            if (hex(buf) === EXPECTED_HASH) { unlock(); }
            else { errEl.hidden = false; input.value = ''; input.focus(); }
        });
    });
})();
</script>
</body>

</html>
